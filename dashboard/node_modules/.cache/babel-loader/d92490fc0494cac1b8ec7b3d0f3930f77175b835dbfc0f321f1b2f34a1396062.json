{"ast":null,"code":"import { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"../utils/axiosSetup.js\";\nconst loginUser = async () => {\n  if (!email || !password) {\n    alert(\"Please fill in all fields\");\n    console.log(\"BaseURL:\", axios.defaults.baseURL);\n    return;\n  }\n  setLoading(true);\n  try {\n    const res = await axios.post(\"/auth/login\", {\n      email,\n      password\n    });\n    console.log(\"Login response:\", res);\n    if (!(res !== null && res !== void 0 && res.data)) {\n      throw new Error(\"Empty response from server\");\n    }\n\n    // check token exists\n    const token = res.data.token;\n    if (!token) {\n      var _res$data;\n      console.error(\"No token in response:\", res.data);\n      alert(((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.message) || \"Login succeeded but no token returned\");\n      setLoading(false);\n      return;\n    }\n\n    // Save token and proceed\n    localStorage.setItem(\"token\", token);\n    navigate(\"/\"); // prefer navigate without forcing full reload\n  } catch (err) {\n    var _err$response, _err$response2, _err$response2$data;\n    console.error(\"Login error:\", err);\n    // show detailed info if available\n    const status = (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status;\n    const serverMessage = ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || err.message;\n    alert(serverMessage || `Login failed${status ? \" (status \" + status + \")\" : \"\"}`);\n  } finally {\n    setLoading(false);\n  }\n};","map":{"version":3,"names":["useState","useNavigate","axios","loginUser","email","password","alert","console","log","defaults","baseURL","setLoading","res","post","data","Error","token","_res$data","error","message","localStorage","setItem","navigate","err","_err$response","_err$response2","_err$response2$data","status","response","serverMessage"],"sources":["C:/Users/sv811/OneDrive/Desktop/BullEdge/dashboard/src/components/Login.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"../utils/axiosSetup.js\";\r\n\r\nconst loginUser = async () => {\r\n  if (!email || !password) {\r\n    alert(\"Please fill in all fields\");\r\n    console.log(\"BaseURL:\", axios.defaults.baseURL);\r\n    return;\r\n  }\r\n\r\n  setLoading(true);\r\n\r\n  try {\r\n    const res = await axios.post(\"/auth/login\", { email, password });\r\n    console.log(\"Login response:\", res);\r\n\r\n    if (!res?.data) {\r\n      throw new Error(\"Empty response from server\");\r\n    }\r\n\r\n    // check token exists\r\n    const token = res.data.token;\r\n    if (!token) {\r\n      console.error(\"No token in response:\", res.data);\r\n      alert(res.data?.message || \"Login succeeded but no token returned\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    // Save token and proceed\r\n    localStorage.setItem(\"token\", token);\r\n    navigate(\"/\"); // prefer navigate without forcing full reload\r\n  } catch (err) {\r\n    console.error(\"Login error:\", err);\r\n    // show detailed info if available\r\n    const status = err.response?.status;\r\n    const serverMessage = err.response?.data?.message || err.message;\r\n    alert(serverMessage || `Login failed${status ? \" (status \" + status + \")\" : \"\"}`);\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,wBAAwB;AAE1C,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;EAC5B,IAAI,CAACC,KAAK,IAAI,CAACC,QAAQ,EAAE;IACvBC,KAAK,CAAC,2BAA2B,CAAC;IAClCC,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEN,KAAK,CAACO,QAAQ,CAACC,OAAO,CAAC;IAC/C;EACF;EAEAC,UAAU,CAAC,IAAI,CAAC;EAEhB,IAAI;IACF,MAAMC,GAAG,GAAG,MAAMV,KAAK,CAACW,IAAI,CAAC,aAAa,EAAE;MAAET,KAAK;MAAEC;IAAS,CAAC,CAAC;IAChEE,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEI,GAAG,CAAC;IAEnC,IAAI,EAACA,GAAG,aAAHA,GAAG,eAAHA,GAAG,CAAEE,IAAI,GAAE;MACd,MAAM,IAAIC,KAAK,CAAC,4BAA4B,CAAC;IAC/C;;IAEA;IACA,MAAMC,KAAK,GAAGJ,GAAG,CAACE,IAAI,CAACE,KAAK;IAC5B,IAAI,CAACA,KAAK,EAAE;MAAA,IAAAC,SAAA;MACVV,OAAO,CAACW,KAAK,CAAC,uBAAuB,EAAEN,GAAG,CAACE,IAAI,CAAC;MAChDR,KAAK,CAAC,EAAAW,SAAA,GAAAL,GAAG,CAACE,IAAI,cAAAG,SAAA,uBAARA,SAAA,CAAUE,OAAO,KAAI,uCAAuC,CAAC;MACnER,UAAU,CAAC,KAAK,CAAC;MACjB;IACF;;IAEA;IACAS,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,KAAK,CAAC;IACpCM,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;EACjB,CAAC,CAAC,OAAOC,GAAG,EAAE;IAAA,IAAAC,aAAA,EAAAC,cAAA,EAAAC,mBAAA;IACZnB,OAAO,CAACW,KAAK,CAAC,cAAc,EAAEK,GAAG,CAAC;IAClC;IACA,MAAMI,MAAM,IAAAH,aAAA,GAAGD,GAAG,CAACK,QAAQ,cAAAJ,aAAA,uBAAZA,aAAA,CAAcG,MAAM;IACnC,MAAME,aAAa,GAAG,EAAAJ,cAAA,GAAAF,GAAG,CAACK,QAAQ,cAAAH,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcX,IAAI,cAAAY,mBAAA,uBAAlBA,mBAAA,CAAoBP,OAAO,KAAII,GAAG,CAACJ,OAAO;IAChEb,KAAK,CAACuB,aAAa,IAAI,eAAeF,MAAM,GAAG,WAAW,GAAGA,MAAM,GAAG,GAAG,GAAG,EAAE,EAAE,CAAC;EACnF,CAAC,SAAS;IACRhB,UAAU,CAAC,KAAK,CAAC;EACnB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}